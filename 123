@ExtendWith(MockitoExtension.class) // replaces openMocks
class LOCCreditProtectionQuotationServiceTest {

    @InjectMocks
    private LOCCreditProtectionQuotationService locCreditProtectionQuotationService;

    // Only mocks that match service fields
    @Mock
    private CreditProtectionCustomerEligibility creditProtectionCustomerEligibility;

    @Mock
    private CreditProtectionCommonBusinessRulesUtil creditProtectionCommonBusinessRulesUtil;

    @Mock
    private CreditProtectionCommonUtil creditProtectionCommonUtil;

    @Mock
    private CpMasterDetailDAO cpMasterDetailDAO;

    // Keep other mocks if they are used in your setup for input/response objects
    @Mock
    protected AddCreditProtectionQuotationRqQuotation quotationInfoMock;

    @Mock
    protected AddCreditProtectionQuotationRqQuotationCreditApplication creditApplicationInfoMock;

    @Mock
    protected AddCreditProtectionQuotationRqQuotationCreditAgreement creditAgreementInfoMock;

    @Mock
    protected AddCreditProtectionQuotationRqQuotationApplicantInnerIndividual quotedPartyInfolMock;

    @Mock
    protected AddCreditProtectionQuotationRqQuotationApplicantInnerIndividual quotedPartyInfo2Mock;

    @BeforeEach
    void setupTestData() throws Exception {
        // Now no need for MockitoAnnotations.openMocks(this);

        // Example mock setups
        when(cpMasterDetailDAO.getCpPlanMasterDetailListLoc()).thenReturn(List.of(cpPlanMasterDetailEMock, cpPlanMasterDetailLMock));
        when(creditProtectionCustomerEligibility.determineCustomerEligibility(anyBoolean(), anyString(), any(), any(), anyBoolean(), any(), anyBoolean(), any()))
            .thenReturn(true);

        when(quotationInfoMock.getRequestTypeCd()).thenReturn("E");
        when(quotationInfoMock.getCreditApplication()).thenReturn(creditApplicationInfoMock);
        when(quotationInfoMock.getCreditAgreement()).thenReturn(creditAgreementInfoMock);

        when(creditApplicationInfoMock.getProductTypeCd()).thenReturn("LOC");
        when(creditAgreementInfoMock.getProductTypeCd()).thenReturn("LOC");

        // Keep other mock setups as you already wrote
    }

    @Test
    void testGetCPQuote() throws Exception {
        AddCreditProtectionQuotationWarningRsQuotation result = locCreditProtectionQuotationService
                .getCPQuote(quotationInfoMock, ErrorDisplayLanguage.EN);
        assertNotNull(result);
        // Add your assertions here
    }
}