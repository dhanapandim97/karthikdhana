@Test
void testGetCpQuote_HttpStatusIfBranch() throws Exception {
    AddCreditProtectionQuotationRq request = new AddCreditProtectionQuotationRq();
    AddCreditProtectionQuotationRqQuotation infoRq = new AddCreditProtectionQuotationRqQuotation();
    infoRq.setApplicant(List.of(new AddCreditProtectionQuotationRqQuotationApplicantInner()));
    request.setQuotation(infoRq);

    // Mock cpFac to throw ApiException with valid numeric server status code
    ErrorConfig mockErrorConfig = mock(ErrorConfig.class);
    when(mockErrorConfig.getId()).thenReturn("TEST_ID");
    ApiException apiEx = mock(ApiException.class);
    AddCreditProtectionQuotationWarningRsStatus statusMock = mock(AddCreditProtectionQuotationWarningRsStatus.class);
    when(apiEx.toWarningStatusV2Response()).thenReturn(statusMock);
    when(statusMock.getServerStatusCode()).thenReturn("201"); // valid numeric
    when(cpFac.getCreditProtectionQuotationV2(any(), any())).thenThrow(apiEx);

    ResponseEntity<AddCreditProtectionQuotationWarningRs> response =
        controller.getCpQuoteWithAllPremium("en", "Bearer token", request);

    assertThat(response.getStatusCode()).isEqualTo(HttpStatus.CREATED); // 201 branch hit
    assertThat(response.getBody().getStatus()).isEqualTo(statusMock);
}