public class ProductConstraintDeserializer extends StdDeserializer<ProductConstraint> {

    public ProductConstraintDeserializer() {
        super(ProductConstraint.class);
    }

    @Override
    public ProductConstraint deserialize(JsonParser p, DeserializationContext ctxt)
            throws IOException {
        JsonNode node = p.readValueAsTree();
        ProductConstraint product = new ProductConstraint();

        if (node.isTextual()) {
            String val = node.asText();
            if (!"*".equals(val)) {
                product.setRawText(val);
            }
            return product;
        }

        if (node.has("ProductGroup")) {
            product.setProductGroup(node.get("ProductGroup").asText());
        }
        if (node.has("ProductClassification")) {
            product.setProductClassification(node.get("ProductClassification").asText());
        }
        if (node.has("ProductCategory")) {
            product.setProductCategory(node.get("ProductCategory").asText());
        }
        return product;
    }
}